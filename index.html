<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Encaminhamentos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1 id="form-title">Registrar Encaminhamento</h1>
        <form id="encaminhamentoForm">
            <input type="hidden" id="editId" name="editId">
            <h2>Dados do Encaminhamento</h2>
            <div class="grid-2-col">
                <div class="form-group"><label for="dataEncaminhamento">Data do Encaminhamento</label><input type="date" id="dataEncaminhamento" required></div>
                <div class="form-group"><label for="turma">Turma</label><input type="text" id="turma" required></div>
            </div>
            <!-- CAMPO DE PROFESSOR ATUALIZADO -->
            <div class="form-group">
                <div class="label-with-button">
                    <label for="professor">Professor(a)</label>
                    <button type="button" id="manage-professors-btn" class="inline-btn">Gerenciar</button>
                </div>
                <input type="text" id="professor" list="professors-datalist" required>
                <datalist id="professors-datalist"></datalist>
            </div>
            <div class="form-group"><label for="estudante">Estudante</label><input type="text" id="estudante" required></div>
            <div class="form-group"><label>Motivo(s)</label><div class="checkbox-container" id="motivos-container"></div></div>
            <div class="form-group"><label for="detalhesMotivo">Detalhes do Motivo</label><textarea id="detalhesMotivo"></textarea></div>
            <h2>Ações a serem tomadas pela Orientação</h2>
            <div class="form-group"><label>Ações Imediatas</label><div class="checkbox-container" id="acoes-container"></div></div>
            <div class="form-group"><label for="detalhesAcao">Detalhes da Ação</label><textarea id="detalhesAcao"></textarea></div>
            <h3>Contato com Responsáveis</h3>
            <div class="grid-2-col"><div class="form-group"><label for="numeroTelefone">Número de telefone</label><input type="tel" id="numeroTelefone"></div><div class="form-group"><label for="horarioLigacao">Horário da ligação</label><input type="time" id="horarioLigacao"></div></div>
            <div class="grid-2-col"><div class="form-group"><label for="statusLigacao">Status da ligação</label><select id="statusLigacao"><option value="">Selecione</option><option value="Atendeu">Atendeu</option><option value="Não atendeu">Não atendeu</option></select></div><div class="form-group"><label for="recadoCom">Deixou recado com:</label><input type="text" id="recadoCom"></div></div>
            <h3>Providências Adicionais</h3>
            <div class="form-group"><div class="checkbox-container" id="providencias-container"></div></div>
            <div class="form-group"><label for="solicitacaoComparecimento">Data e hora para comparecimento:</label><input type="text" id="solicitacaoComparecimento" placeholder="Ex: 25/08/2025 às 14h30"></div>
            <h2>Fechamento</h2>
            <div class="grid-2-col"><div class="form-group"><label for="status">Status do Encaminhamento</label><select id="status"><option value="Aberto">Aberto</option><option value="Em Acompanhamento">Em Acompanhamento</option><option value="Resolvido">Resolvido</option><option value="Arquivado">Arquivado</option></select></div><div class="form-group"><label for="registradoPor">Registrado por</label><select id="registradoPor" required><option value="">Carregando...</option></select></div></div>
            <div class="form-group"><label for="outrasInformacoes">Outras Informações Relevantes</label><textarea id="outrasInformacoes"></textarea></div>
            <button type="submit" id="btnRegistrar">Registrar Encaminhamento</button>
            <div class="edit-buttons-container" id="editButtons"><button type="button" id="btnSalvarEdicao">Salvar Alterações</button><button type="button" id="btnCancelarEdicao">Cancelar Edição</button></div>
        </form>
        <div id="status-message"></div>
    </div>
    <div class="container-consulta">
        <h1>Consultar Encaminhamentos</h1>
        <form id="searchForm">
            <div class="grid-2-col"><div class="form-group"><label for="search-estudante">Buscar por Estudante</label><input type="text" id="search-estudante" placeholder="Parte do nome..."></div><div class="form-group"><label for="search-professor">Buscar por Professor(a)</label><input type="text" id="search-professor" placeholder="Parte do nome..."></div></div>
            <div class="grid-2-col"><div class="form-group"><label for="search-data">Buscar por Data</label><input type="date" id="search-data"></div><div class="form-group"><label for="search-registrado">Buscar por Quem Registrou</label><input type="text" id="search-registrado" placeholder="Parte do nome..."></div></div>
            <button type="submit">Buscar Encaminhamentos</button>
        </form>
    </div>

    <!-- ESTRUTURA DA JANELA FLUTUANTE (MODAL) -->
    <div id="professors-modal" class="modal">
        <div class="modal-content">
            <span id="close-modal-btn" class="close-btn">&times;</span>
            <h2>Gerenciar Professores</h2>
            <div class="form-group">
                <label for="new-professor-name">Adicionar Novo Professor</label>
                <div class="input-with-button">
                    <input type="text" id="new-professor-name" placeholder="Nome completo do professor">
                    <button type="button" id="add-professor-btn">Adicionar</button>
                </div>
            </div>
            <hr>
            <h3>Lista de Professores</h3>
            <div id="professors-list-modal" class="modal-list">
                <!-- A lista será preenchida pelo JavaScript -->
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="script.js"></script>
</body>
</html>

